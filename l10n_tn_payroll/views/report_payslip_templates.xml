<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
    id="l10n_tn_payroll_report_payslip"
    inherit_id="hr_payroll.report_payslip"
  >

        <xpath expr="//table[@id='employee_info_table_1']" position="before">
            <table
        name="t_employee-infos"
        id="employee_info_table_1"
        class="table table-sm table-bordered"
        style="border: 2px solid black;"
      >
                <tr id="employee_info_line_n1">
                    <td><strong>MAT</strong></td>
                    <td><strong>NOM PRENOM</strong></td>
                    <td colspan="2"><strong>Sit.Fami.</strong></td>
                    <td><strong>QUALIFICATION</strong></td>
                </tr>
                <tr id="employee_info_line_n2">
                    <td name="identification-id"><span
              t-field="o.employee_id.identification_id"
            /></td>
                    <td><span t-field="o.employee_id" /></td>
                    <td style="border-right: none;"><span
              t-field="o.employee_id.marital"
            /></td>
                    <td style="border-left: none;"><span
              t-field="o.employee_id.children"
            /></td>
                    <td name="head_of_the_family"><span
              t-field="o.employee_id.employee_type"
            /></td>
                </tr>
            </table>
             <table
        name="t_employee-infos2"
        id="temployee_info_table_2"
        class="table table-sm table-bordered"
        style="border: 2px solid black;"
      >
                <tr id="employee_info_1">
                    <td><strong>NÂ° CNSS</strong></td>
                    <td><strong>CAT.</strong></td>
                    <td><strong>ECH.</strong></td>
                    <td><strong>Salaire de base</strong></td>
                    <td><strong>PAIEMENT</strong></td>
                    <td>ESPECES*</td>
                </tr>
                <tr id="employee_info_n2">
                    <td><span t-field="o.employee_id.ssnid" /></td>
                    <td><span t-field="o.employee_id.pro_category" /></td>
                    <td><span t-field="o.contract_id.agreement_id" /></td>
                    <td class="w-25">
                        <span
              t-out="o.contract_id._get_contract_wage()"
              t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"
            />
                    </td>
                    <td><strong>Situation administrative</strong></td>
                    <td class="w-25"><span
              class="text-capitalize"
              t-out="o.contract_id.wage_type"
            /></td>
                </tr>
            </table>
        </xpath>

        <xpath expr="//table/tr[@id='employee_info_line_1']" position="replace">
        </xpath>
        <xpath expr="//table/tr[@id='employee_info_line_2']" position="replace">
        </xpath>
        <xpath expr="//table/tr[@id='employee_info_line_3']" position="replace">
        </xpath>
        <xpath expr="//table/tr[@id='employee_info_line_4']" position="replace">
        </xpath>
        <xpath expr="//table/tr[@id='employee_info_line_5']" position="replace">
        </xpath>
        <xpath expr="//table/tr[@id='employee_info_line_6']" position="replace">
        </xpath>
        <xpath expr="//table/tr[@id='employee_info_line_7']" position="replace">
        </xpath>
        <xpath expr="//table[@class='table table-sm']" position="replace">
        </xpath>

        <xpath expr="//div[@id='total']" position="replace">
            <div id="total">
                <table class="table table-sm table-bordered ">
                    <thead class="o_black_border">
                        <tr>
                            <th id="line_header_name">DESIGNATION</th>
                            <th id="line_header_hours">BASE</th>
                            <th id="line_header_days" class="text-end">REMUNERATION</th>
                            <th id="line_header_amount" class="text-end">RETENUE</th>
                        </tr>
                    </thead>
                    <tbody>
                         <t id="payslip_lines">
                            <span
                t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)"
                t-as="line"
              >
                                <tr
                  t-att-class="line_class"
                  t-att-style="line_style"
                  id="line_display"
                >
                                    <td id="payslip_line_name"><span
                      t-field="line.name"
                    /></td>
                                    <td
                    id="payslip_line_quantity_tn"
                    class="text-end"
                  ><span
                      t-if="line.appears_on_payslip_quantity"
                      t-esc="line.quantity"
                    /></td>
                                    <td
                    id="payslip_line_total_tn"
                    class="text-end"
                  ><span
                      t-if="line.total >0"
                      t-esc="line.total"
                      t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'
                    />
                                    </td>
                                    <td id="payslip_line_retenue" class="text-end"><span
                      t-if="line.total &lt;= 0"
                      t-esc="line.total*-1"
                      t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'
                    /></td>
                                </tr>
                            </span>
                        </t>
                    </tbody>
                </table>
                <div class="oe_structure" />
            </div>
        </xpath>
    </template>
</odoo>
